#include "Weather.hpp"
#include <cstdlib>

Weather::Weather() {
    // Randomly assign 1-5
    current = (rand() % 5) + 1;
}

int Weather::GetWeather() {
    return current;
}

void Weather::UpdateWeather() {
    int r = rand() % 100; // 0 to 99
    int next = current;

    if (current == 5) { // Overcast
        if (r < 20) next = 5;
        else if (r < 40) next = 1;
        else if (r < 60) next = 2;
        else if (r < 80) next = 3;
        else next = 4;
    } 
    else if (current == 1) { // Sunny Humid
        if (r < 10) next = 1;
        else if (r < 40) next = 2;
        else if (r < 80) next = 5; // 40%
        else next = 3; // 20%
    }
    else if (current == 2) { // Sunny Not Humid
        if (r < 20) next = 2;
        else if (r < 50) next = 1; // 30%
        else if (r < 80) next = 5; // 30%
        else if (r < 90) next = 3; // 10%
        else next = 4; // 10%
    }
    else if (current == 3) { // Rain Windy
        if (r < 10) next = 3;
        else if (r < 40) next = 5; // 30%
        else if (r < 60) next = 1; // 20%
        else if (r < 90) next = 4; // 30%
        else next = 2; // 10%
    }
    else if (current == 4) { // Rain Not Windy
        if (r < 20) next = 4;
        else if (r < 40) next = 5; // 20%
        else if (r < 70) next = 1; // 30%
        else if (r < 90) next = 3; // 20%
        else next = 2; // 10%
    }

    current = next;
}
